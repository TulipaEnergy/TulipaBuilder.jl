<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic example with renewable producer and battery and scenarios · TulipaBuilder.jl</title><meta name="title" content="Basic example with renewable producer and battery and scenarios · TulipaBuilder.jl"/><meta property="og:title" content="Basic example with renewable producer and battery and scenarios · TulipaBuilder.jl"/><meta property="twitter:title" content="Basic example with renewable producer and battery and scenarios · TulipaBuilder.jl"/><meta name="description" content="Documentation for TulipaBuilder.jl."/><meta property="og:description" content="Documentation for TulipaBuilder.jl."/><meta property="twitter:description" content="Documentation for TulipaBuilder.jl."/><meta property="og:url" content="https://TulipaEnergy.github.io/TulipaBuilder.jl/10-tutorials/51-renewable-with-battery-scenario/"/><meta property="twitter:url" content="https://TulipaEnergy.github.io/TulipaBuilder.jl/10-tutorials/51-renewable-with-battery-scenario/"/><link rel="canonical" href="https://TulipaEnergy.github.io/TulipaBuilder.jl/10-tutorials/51-renewable-with-battery-scenario/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TulipaBuilder.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">TulipaBuilder</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../00-index/">Tutorials</a></li><li><a class="tocitem" href="../10-basic/">Basic tutorial</a></li><li><a class="tocitem" href="../50-renewable-with-battery/">Basic example with renewable producer and battery</a></li><li class="is-active"><a class="tocitem" href>Basic example with renewable producer and battery and scenarios</a></li></ul></li><li><a class="tocitem" href="../../90-contributing/">Contributing guidelines</a></li><li><a class="tocitem" href="../../91-developer/">Developer docs</a></li><li><a class="tocitem" href="../../95-reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Basic example with renewable producer and battery and scenarios</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Basic example with renewable producer and battery and scenarios</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaBuilder.jl/blob/main/docs/src/10-tutorials/51-renewable-with-battery-scenario.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Basic-example-with-renewable-producer-and-battery-and-scenarios"><a class="docs-heading-anchor" href="#Basic-example-with-renewable-producer-and-battery-and-scenarios">Basic example with renewable producer and battery and scenarios</a><a id="Basic-example-with-renewable-producer-and-battery-and-scenarios-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-example-with-renewable-producer-and-battery-and-scenarios" title="Permalink"></a></h1><p>This tutorial goes over a creation of a simple Tulipa problem, with the following:</p><ul><li>1 thermal generator, with 1 existing unit, and capacity for 500 KW;</li><li>1 solar generator, with 1 existing unit, capacity for 200 KW and an availability profile named &quot;solar&quot;;</li><li>1 consumer, with peak demand of 500 KW, and a demand profile named &quot;demand&quot;;</li><li>1 battery node;</li><li>The profiles per scenario are stored in a CSV file.</li></ul><pre><code class="language-julia hljs">using TulipaBuilder</code></pre><p>The first step is to create a <code>TulipaData</code> object.</p><pre><code class="language-julia hljs">tulipa = TulipaData()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TulipaData{String}(Meta graph based on a Graphs.SimpleGraphs.SimpleDiGraph{Int64} with vertex labels of type String, vertex metadata of type TulipaBuilder.TulipaAsset, edge metadata of type TulipaBuilder.TulipaFlow, graph metadata given by nothing, and default weight 1.0, false, Dict{Int64, Dict{Symbol, Any}}(), Dict{Tuple{String, Int64}, Dict{Symbol, Any}}())</code></pre><p>Then, we add each asset with their respective characteristics.</p><pre><code class="language-julia hljs">add_asset!(tulipa, &quot;thermal&quot;, :producer, capacity = 500.0, initial_units = 1.0)
add_asset!(tulipa, &quot;solar&quot;, :producer, capacity = 200.0, initial_units = 1.0)
add_asset!(tulipa, &quot;demand&quot;, :consumer, peak_demand = 500.0)
add_asset!(tulipa, &quot;battery&quot;, :storage)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TulipaData{String}(Meta graph based on a Graphs.SimpleGraphs.SimpleDiGraph{Int64} with vertex labels of type String, vertex metadata of type TulipaBuilder.TulipaAsset, edge metadata of type TulipaBuilder.TulipaFlow, graph metadata given by nothing, and default weight 1.0, false, Dict{Int64, Dict{Symbol, Any}}(), Dict{Tuple{String, Int64}, Dict{Symbol, Any}}())</code></pre><p>Next, we need to define the flows between these assets, and the operational cost, if defined.</p><pre><code class="language-julia hljs">add_flow!(tulipa, &quot;thermal&quot;, &quot;demand&quot;, operational_cost = 0.05)
add_flow!(tulipa, &quot;solar&quot;, &quot;demand&quot;)
add_flow!(tulipa, &quot;demand&quot;, &quot;battery&quot;)
add_flow!(tulipa, &quot;battery&quot;, &quot;demand&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TulipaData{String}(Meta graph based on a Graphs.SimpleGraphs.SimpleDiGraph{Int64} with vertex labels of type String, vertex metadata of type TulipaBuilder.TulipaAsset, edge metadata of type TulipaBuilder.TulipaFlow, graph metadata given by nothing, and default weight 1.0, false, Dict{Int64, Dict{Symbol, Any}}(), Dict{Tuple{String, Int64}, Dict{Symbol, Any}}())</code></pre><p>To visualise the network using the internal graph, please check the tutorial <a href="../50-renewable-with-battery/#basic_renewable_battery">Basic example with renewable producer and battery</a>.</p><p>Let&#39;s load the profiles from a CSV file and explore the data. The scenarios here represent different weather years, e.g.,</p><pre><code class="language-julia hljs">using CSV
using DataFrames

profiles_data = joinpath(@__DIR__, &quot;..&quot;, &quot;..&quot;, &quot;..&quot;, &quot;test&quot;, &quot;tiny-profiles-scenarios.csv&quot;)
df = DataFrame(CSV.File(profiles_data))

# Group by scenario and plot first week for each scenario
using Plots
plt = plot()
grouped = groupby(df, :scenario)
linestyles = [:solid, :dash, :dot, :dashdot]
for (i, scenario_df) in enumerate(grouped)
    scenario_id = scenario_df.scenario[1]
    ls = linestyles[mod1(i, length(linestyles))]
    plot!(
        plt,
        scenario_df[1:168, &quot;solar&quot;],
        c = :orange,
        lw = 2,
        alpha = 0.7,
        label = &quot;solar ($scenario_id)&quot;,
        linestyle = ls,
    )
    plot!(
        plt,
        scenario_df[1:168, &quot;demand&quot;],
        c = :green,
        lw = 2,
        alpha = 0.7,
        label = &quot;demand ($scenario_id)&quot;,
        linestyle = ls,
    )
end
plot!(
    plt,
    legend = :outerbottom,
    legendcolumns = 2,
    title = &quot;Profiles for different weather years (scenarios)&quot;,
)
xlabel!(plt, &quot;Hour&quot;)
ylabel!(plt, &quot;Profile value (pu)&quot;)
plt</code></pre><img src="c0f3403a.svg" alt="Example block output"/><p>Now, let&#39;s attach the profiles to the solar and demand assets for each scenario.</p><div class="admonition is-success" id="Use-keyword-scenario-when-attaching-profiles-to-assets-for-different-scenarios-b6e38d866c7cfefe"><header class="admonition-header">Use keyword `scenario` when attaching profiles to assets for different scenarios<a class="admonition-anchor" href="#Use-keyword-scenario-when-attaching-profiles-to-assets-for-different-scenarios-b6e38d866c7cfefe" title="Permalink"></a></header><div class="admonition-body"><p>The function <code>attach_profile!</code> has a keyword <code>scenario</code> to specify the scenario for which the profile is attached. Notice that in the loop below, we are adding profiles for each scenario in the keyword, so the profiles are attached to each scenario. If we don&#39;t pass the keyword <code>scenario</code>, the profiles would have been attached to a default scenario (with value <code>1</code>). For and example of attaching profiles without scenarios, please check the tutorial <a href="../50-renewable-with-battery/#basic_renewable_battery">Basic example with renewable producer and battery</a>. Please check the <a href="../../95-reference/#reference">reference</a> section for more information about this function.</p></div></div><pre><code class="language-julia hljs">year = 2030
for scenario_df in grouped
    scenario_id = scenario_df.scenario[1]
    solar_profile = Vector(scenario_df[!, &quot;solar&quot;])
    demand_profile = Vector(scenario_df[!, &quot;demand&quot;])
    attach_profile!(tulipa, &quot;solar&quot;, :availability, year, solar_profile; scenario = scenario_id)
    attach_profile!(tulipa, &quot;demand&quot;, :demand, year, demand_profile; scenario = scenario_id)
end</code></pre><p>Now we can create the connection with the data of the Tulipa problem using the <code>create_connection</code> function.</p><pre><code class="language-julia hljs">connection = create_connection(tulipa)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">DuckDB.DB(&quot;:memory:&quot;)</code></pre><p>Let&#39;s check the inserted profiles in the <code>profiles</code> table, which now contains the scenario information. Here we summarize the mean value per scenario and profile name to verify that the data was correctly inserted.</p><pre><code class="language-julia hljs">using DuckDB
tulipa_profiles = DuckDB.query(connection, &quot;FROM profiles&quot;) |&gt; DataFrame

# summarize per scenario and profile_name
using Statistics
combine(groupby(tulipa_profiles, [:scenario, :profile_name]), :value =&gt; mean =&gt; :mean_value)</code></pre><div><div style = "float: left;"><span>6×3 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">scenario</th><th style = "text-align: left;">profile_name</th><th style = "text-align: left;">mean_value</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "String" style = "text-align: left;">String</th><th title = "Float64" style = "text-align: left;">Float64</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: right;">2008</td><td style = "text-align: left;">solar-availability-2030</td><td style = "text-align: right;">0.180548</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: right;">2009</td><td style = "text-align: left;">solar-availability-2030</td><td style = "text-align: right;">0.184904</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: right;">1995</td><td style = "text-align: left;">solar-availability-2030</td><td style = "text-align: right;">0.184707</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: right;">2008</td><td style = "text-align: left;">demand-demand-2030</td><td style = "text-align: right;">0.577493</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: right;">1995</td><td style = "text-align: left;">demand-demand-2030</td><td style = "text-align: right;">0.57874</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">6</td><td style = "text-align: right;">2009</td><td style = "text-align: left;">demand-demand-2030</td><td style = "text-align: right;">0.584813</td></tr></tbody></table></div><p>Notice that the profile names are automatically created from the attached data in the <code>assets_profiles</code> table, but the scenario column is not included there since it is implied by the profiles attached to each asset:</p><pre><code class="language-julia hljs">using DuckDB
DuckDB.query(connection, &quot;FROM assets_profiles&quot;) |&gt; DataFrame</code></pre><div><div style = "float: left;"><span>2×4 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">asset</th><th style = "text-align: left;">commission_year</th><th style = "text-align: left;">profile_name</th><th style = "text-align: left;">profile_type</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "String" style = "text-align: left;">String</th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "String" style = "text-align: left;">String</th><th title = "String" style = "text-align: left;">String</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">solar</td><td style = "text-align: right;">2030</td><td style = "text-align: left;">solar-availability-2030</td><td style = "text-align: left;">availability</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">demand</td><td style = "text-align: right;">2030</td><td style = "text-align: left;">demand-demand-2030</td><td style = "text-align: left;">demand</td></tr></tbody></table></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../50-renewable-with-battery/">« Basic example with renewable producer and battery</a><a class="docs-footer-nextpage" href="../../90-contributing/">Contributing guidelines »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 6 February 2026 10:41">Friday 6 February 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
